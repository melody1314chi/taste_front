import{p as U,h as D,s as _,c as n,i as ae,j as H,k as oe,l as le,m as W,n as se,q as J,t as K,v as L,x as Q,d as t,y as X,z as Z,A as ee,B as re,C as ne,D as ue,E as ie,G as ce,H as de,I as ve,J as me,K as fe,L as ge,M as he,N as pe,O as ye,u as be,a as Se,P as ke,Q as Ve,b as T,w as o,V as B,R as V,S as y,F as P,r as E,f as z,T as C,U as A,W as O,X as G,e as w,Y as _e,Z as Ce,_ as F,g as we,$ as xe,a0 as Te,o as S}from"./index-BJ5mKrdB.js";import{z as Be}from"./vue-boring-avatars-CKPkE8S5.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Y}from"./VDivider-CdbKQ_Fw.js";import{u as Re,V as N,a as R}from"./VList-BScphOTg.js";import{V as Ie}from"./VRow-C-TIxZZV.js";import{V as He}from"./VCol-BTinVxch.js";import{V as ze,a as Le}from"./VNavigationDrawer-CSDJUbwG.js";import{V as j,m as Ee}from"./VToolbar-BoHo-yMp.js";import{V as Ae}from"./VContainer-D9u67iRf.js";import{V as q}from"./VMenu-CcMWMFbz.js";const Fe=U({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ne(e){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=h;let g=0,v=0;const l=D(null),d=_(0),i=_(0),p=_(0),k=_(!1),m=_(!1),s=n(()=>Number(e.scrollThreshold)),c=n(()=>ae((s.value-d.value)/s.value||0)),f=()=>{const a=l.value;if(!a||u&&!u.value)return;g=d.value,d.value="window"in a?a.pageYOffset:a.scrollTop;const b=a instanceof Window?document.documentElement.scrollHeight:a.scrollHeight;if(v!==b){v=b;return}m.value=d.value<g,p.value=Math.abs(d.value-s.value)};return H(m,()=>{i.value=i.value||d.value}),H(k,()=>{i.value=0}),oe(()=>{H(()=>e.scrollTarget,a=>{var I;const b=a?document.querySelector(a):window;b&&b!==l.value&&((I=l.value)==null||I.removeEventListener("scroll",f),l.value=b,l.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),le(()=>{var a;(a=l.value)==null||a.removeEventListener("scroll",f)}),u&&H(u,f,{immediate:!0}),{scrollThreshold:s,currentScroll:d,currentThreshold:p,isScrollActive:k,scrollRatio:c,isScrollingUp:m,savedScroll:i}}const Ue=U({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ee(),...Z(),...Fe(),height:{type:[Number,String],default:64}},"VAppBar"),De=W()({name:"VAppBar",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,h){let{slots:u}=h;const g=D(),v=se(e,"modelValue"),l=n(()=>{var x;const r=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:r.has("hide"),fullyHide:r.has("fully-hide"),inverted:r.has("inverted"),collapse:r.has("collapse"),elevate:r.has("elevate"),fadeImage:r.has("fade-image")}}),d=n(()=>{const r=l.value;return r.hide||r.fullyHide||r.inverted||r.collapse||r.elevate||r.fadeImage||!v.value}),{currentScroll:i,scrollThreshold:p,isScrollingUp:k,scrollRatio:m}=Ne(e,{canScroll:d}),s=n(()=>l.value.hide||l.value.fullyHide),c=n(()=>e.collapse||l.value.collapse&&(l.value.inverted?m.value>0:m.value===0)),f=n(()=>e.flat||l.value.fullyHide&&!v.value||l.value.elevate&&(l.value.inverted?i.value>0:i.value===0)),a=n(()=>l.value.fadeImage?l.value.inverted?1-m.value:m.value:void 0),b=n(()=>{var M,$;if(l.value.hide&&l.value.inverted)return 0;const r=((M=g.value)==null?void 0:M.contentHeight)??0,x=(($=g.value)==null?void 0:$.extensionHeight)??0;return s.value?i.value<p.value||l.value.fullyHide?r+x:r:r+x});J(n(()=>!!e.scrollBehavior),()=>{ee(()=>{s.value?l.value.inverted?v.value=i.value>p.value:v.value=k.value||i.value<p.value:v.value=!0})});const{ssrBootStyles:I}=Re(),{layoutItemStyles:te}=K({id:e.name,order:n(()=>parseInt(e.order,10)),position:L(e,"location"),layoutSize:b,elementSize:_(void 0),active:v,absolute:L(e,"absolute")});return Q(()=>{const r=j.filterProps(e);return t(j,X({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...te.value,"--v-toolbar-image-opacity":a.value,height:void 0,...I.value},e.style]},r,{collapse:c.value,flat:f.value}),u)}),{}}}),Me=U({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ye(),...pe(),...he(),...Z(),...ge(),...fe({tag:"footer"}),...me()},"VFooter"),$e=W()({name:"VFooter",props:Me(),setup(e,h){let{slots:u}=h;const g=D(),{themeClasses:v}=re(e),{backgroundColorClasses:l,backgroundColorStyles:d}=ne(L(e,"color")),{borderClasses:i}=ue(e),{elevationClasses:p}=ie(e),{roundedClasses:k}=ce(e),m=_(32),{resizeRef:s}=de(f=>{f.length&&(m.value=f[0].target.clientHeight)}),c=n(()=>e.height==="auto"?m.value:parseInt(e.height,10));return J(()=>e.app,()=>{const f=K({id:e.name,order:n(()=>parseInt(e.order,10)),position:n(()=>"bottom"),layoutSize:c,elementSize:n(()=>e.height==="auto"?void 0:c.value),active:n(()=>e.app),absolute:L(e,"absolute")});ee(()=>{g.value=f.layoutItemStyles.value})}),Q(()=>t(e.tag,{ref:s,class:["v-footer",v.value,l.value,i.value,p.value,k.value,e.class],style:[d.value,e.app?g.value:{height:ve(e.height)},e.style]},u)),{}}}),Oe={__name:"default",setup(e){const{t:h}=be(),u=Se(),{apiAuth:g}=xe(),v=ke(),l=Te(),d=Ve(),i=n(()=>[{to:"/favoriteRecipe",text:h("nav.favoriteRecipe"),icon:"mdi-shopping"},{to:"/userGroup",text:h("nav.userGroup"),icon:"mdi-account-group"},{to:"/importRecipe",text:h("nav.importRecipe"),icon:"mdi-import"}]),p=[{text:"English",value:"en"},{text:"繁體中文",value:"zhHant"}],k=async()=>{try{await g.delete("/user/logout")}catch(s){console.log(s)}u.logout(),v({text:h("logout.success"),snackbarProps:{color:"green"}}),l.push("/")};function m(){d.global.name.value=d.global.current.value.dark?"light":"dark"}return(s,c)=>{const f=we("router-view");return S(),T(P,null,[t(ze,{permanent:""},{default:o(()=>[t(B),t(V,{to:"/",active:!1,style:{"text-transform":"none","font-size":"24px"},class:"bg-transparent"},{default:o(()=>c[0]||(c[0]=[y("Taste of Us")])),_:1}),t(Y),t(B),t(N,null,{default:o(()=>[(S(!0),T(P,null,E(i.value,a=>(S(),z(R,{key:a.to,"prepend-icon":a.icon,title:a.text,to:a.to},null,8,["prepend-icon","title","to"]))),128))]),_:1}),t(B),t(Y),t($e,{absolute:"",bottom:"0",style:{position:"fixed",bottom:"0"}},{default:o(()=>[t(Ie,{justify:"center"},{default:o(()=>[t(He,{cols:"12",class:"text-center"},{default:o(()=>[y(" © "+C(new Date().getFullYear())+" Taste of Us ",1)]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,null,{default:o(()=>[t(De,{color:"rgba(0, 0, 0, 0)",app:"",elevation:"0"},{default:o(()=>[t(Ae,{fluid:"",class:"d-flex align-center"},{default:o(()=>[t(B),(S(!0),T(P,null,E(i.value,a=>(S(),T(P,null,[a.show?(S(),z(V,{key:a.to,to:a.to,"prepend-icon":a.icon},{default:o(()=>[y(C(a.text),1)]),_:2},1032,["to","prepend-icon"])):A("",!0)],64))),256)),t(B),O(t(V,{to:"/login"},{default:o(()=>c[1]||(c[1]=[y("Login")])),_:1},512),[[G,!w(u).isLoggedIn]]),O(t(V,{to:"/register"},{default:o(()=>c[2]||(c[2]=[y("Register")])),_:1},512),[[G,!w(u).isLoggedIn]]),t(q,null,{activator:o(({props:a})=>[t(V,_e(Ce(a)),{default:o(()=>[t(F,{icon:"mdi-translate"})]),_:2},1040)]),default:o(()=>[t(N,null,{default:o(()=>[(S(),T(P,null,E(p,a=>t(R,{key:a.value,onClick:b=>s.$i18n.locale=a.value},{default:o(()=>[y(C(a.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),t(V,null,{default:o(()=>[t(F,{icon:"mdi-theme-light-dark",onClick:m})]),_:1}),w(u).isLoggedIn?(S(),z(q,{key:0,to:"/"},{activator:o(({props:a})=>[t(V,X({variant:"text"},a,{onClick:s.handleClick}),{default:o(()=>[t(w(Be),{size:40,variant:"beam",name:w(u).username,title:!0,colors:s.colors},null,8,["name","colors"])]),_:2},1040,["onClick"])]),default:o(()=>[t(N,null,{default:o(()=>[t(R,{to:"/userProfile","prepend-icon":"mdi-account"},{default:o(()=>[y(C(s.$t("nav.myProfile")),1)]),_:1}),t(R,{to:"/orders","prepend-icon":"mdi-format-list-bulleted"},{default:o(()=>[y(C(s.$t("nav.myOrders")),1)]),_:1}),t(R,{"prepend-icon":"mdi-logout",onClick:k},{default:o(()=>[y(C(s.$t("nav.logout")),1)]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1}),t(f),w(u).isLoggedIn?(S(),z(V,{key:0,to:"/createRecipe",fab:"",color:"success",size:"large",class:"fixed-button",rounded:"circle","min-width":"60px","min-height":"60px",border:"2px",onClick:s.createRecipe},{default:o(()=>[t(F,{class:"icon-shadow"},{default:o(()=>c[3]||(c[3]=[y("mdi-plus")])),_:1})]),_:1},8,["onClick"])):A("",!0)]),_:1})],64)}}},tt=Pe(Oe,[["__scopeId","data-v-5a3a6830"]]);export{tt as default};
