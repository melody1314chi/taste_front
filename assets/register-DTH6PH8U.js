import{u as C,W as T,a4 as q,a5 as M,g as P,w as l,o as E,d as t,S as V,T as b,ax as R,e,ar as i,Z as _,_ as B}from"./index-DpGVHu_m.js";import{c as F,b as n,f as N,u as U,e as m}from"./index.esm-CI4TANjg.js";import{v as w}from"./index-D0tA8eIv.js";import{b as h}from"./route-block-B_A1xBdJ.js";import{V as I}from"./VContainer-BkSpNhML.js";import{V as D}from"./VRow-z9MLI__U.js";import{V as x}from"./VCol-CkO_qeVS.js";import{V as L}from"./VDivider-Cb5NaCeE.js";import{V as j}from"./VForm-BDFDZXXs.js";const O={class:"text-center"},W={class:"text-center"},Z={__name:"register",setup(z){const{t:s}=C(),{api:S}=q(),f=T(),y=M(),$=F({account:n().required(s("api.userAccountRequired")).min(4,s("api.userAccountTooShort")).max(20,s("api.userAccountTooLong")).test("isAlphanumeric",s("api.userAccountInvalid"),a=>w.isAlphanumeric(a)),email:n().required(s("api.userEmailRequired")).test("isEmail",s("api.userEmailInvalid"),a=>w.isEmail(a)),password:n().required(s("api.userPasswordRequired")).min(4,s("api.userPasswordTooShort")).max(20,s("api.userPasswordTooLong")),passwordConfirm:n().oneOf([N("password")],s("api.userPasswordNotMatch"))}),{handleSubmit:k,isSubmitting:v}=U({validationSchema:$}),d=m("account"),p=m("email"),c=m("password"),g=m("passwordConfirm"),A=k(async a=>{var r,o;try{await S.post("/user",{account:a.account,email:a.email,password:a.password}),f({text:s("register.success"),snackbarProps:{color:"green"}}),y.push("/login")}catch(u){console.log(u),f({text:s("api."+((o=(r=u==null?void 0:u.response)==null?void 0:r.data)==null?void 0:o.message)||"unknownError"),snackbarProps:{color:"red"}})}});return(a,r)=>(E(),P(I,null,{default:l(()=>[t(D,{justify:"center"},{default:l(()=>[t(x,{cols:"4"},{default:l(()=>[V("h1",O,b(a.$t("nav.register")),1)]),_:1}),t(L),t(x,{cols:"4"},{default:l(()=>[t(j,{disabled:e(v),onSubmit:R(e(A),["prevent"])},{default:l(()=>[t(i,{modelValue:e(d).value.value,"onUpdate:modelValue":r[0]||(r[0]=o=>e(d).value.value=o),"error-messages":e(d).errorMessage.value,label:a.$t("user.account"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(p).value.value,"onUpdate:modelValue":r[1]||(r[1]=o=>e(p).value.value=o),"error-messages":e(p).errorMessage.value,label:a.$t("user.email")},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(c).value.value,"onUpdate:modelValue":r[2]||(r[2]=o=>e(c).value.value=o),type:"password","error-messages":e(c).errorMessage.value,label:a.$t("user.password"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),t(i,{modelValue:e(g).value.value,"onUpdate:modelValue":r[3]||(r[3]=o=>e(g).value.value=o),type:"password","error-messages":e(g).errorMessage.value,label:a.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,["modelValue","error-messages","label"]),V("div",W,[t(_,{loading:e(v),type:"submit",color:"primary"},{default:l(()=>[B(b(a.$t("register.submit")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};typeof h=="function"&&h(Z);export{Z as default};
